## SpringCloud

为了应对高并发问题，**一个原本独立的系统拆分成多个小型服务**，这些小型服务都在各自独立的进程中运行，服务之间通过基于**HTTP** **的** **RESTful** **API** **进行通信协作。**

不同的功能被分成了不同的微服务，Spring Cloud统一了标准，为每个功能都提供了一个解决方案组件。避免了每家公司都自己开发一个组件，小公司无资金和技术开发。Spring Cloud中每个微服务都是一个SpringBoot项目。

快速开始：

- 创建Spring Boot项目
- 添加Spring Cloud依赖（相应的组件依赖）
- application.yml配置服务注册与发现
- **创建微服务。**根据需求创建微服务模块，可以使用Spring Boot快速搭建。每个微服务可以有自己的业务逻辑和数据库访问等。
- 其他配置，如注册微服务到Eureka Server、实现服务间通信等。



## 云原生



## Docker

要将一个运行在Windows上的网站部署到Linux服务器上，可以按照以下步骤进行操作：

1. 确保目标Linux服务器已经安装并配置好Docker和Docker Compose。这些工具将帮助您在Linux服务器上管理和运行容器。
2. 在Windows上将网站的文件和代码打包成一个Docker镜像。可以使用Dockerfile来定义镜像的构建过程，包括依赖项的安装、代码的复制等。确保Dockerfile中指定了正确的基础映像和依赖项。
3. 将构建好的Docker镜像推送到一个Docker镜像仓库，如Docker Hub或私有的镜像仓库。这样在Linux服务器上可以轻松地拉取镜像并进行部署。
4. 在Linux服务器上，使用Docker Compose定义一个部署配置文件（通常是一个docker-compose.yml文件），用于描述需要运行的容器和其相关配置。在配置文件中，您需要指定要运行的容器的名称、映像名称、端口映射、环境变量等。
5. 将部署配置文件和其他必要的文件（如配置文件、静态文件等）复制到Linux服务器上的适当目录。
6. 在Linux服务器上使用Docker Compose运行部署配置文件。这将会创建并启动所需的容器，将您的网站运行在Linux服务器上。您可以使用Docker Compose命令行工具来管理容器，包括启动、停止、重启等操作。

## Jenkins



# 测试流程

## 测试工具

- **抓包工具**的主要功能是捕获和分析网络通信的数据包，包括请求和响应的内容。它可以用于监视网络流量、查看请求和响应的细节、分析性能问题等。抓包工具关注的是底层的网络通信，可以抓取各种类型的数据，包括HTML、JSON、图片、视频等。
- **接口测试工具**的主要功能是测试接口的功能和数据交互。它可以模拟请求和验证响应，检查接口的返回结果是否符合预期。接口测试工具关注的是接口的输入和输出，通常验证接口的请求参数、响应结构和数据内容，以确保接口的正确性。

### 抓包工具（Fiddler）

原理是通过中间代理 捕获包。

### <img src="https://raw.githubusercontent.com/LifeSum12/typora-image/main/img/202306041625147.png" alt="image-20230604162501979" style="zoom:50%;" />

Fiddler安装？

**Fiddler中的Host表示访问的域名/IP地址，注意区分URL和Host。URL是请求地址。**

例如，在URL "https://www.example.com/page.html" 中，"[www.example.com](http://www.example.com/)" 是Host。

- Host是URL的一部分，指定了资源所在的服务器的域名或IP地址。
- URL是用于唯一标识和定位网络资源的字符串，包括协议、Host、路径等组成部分。

#### Web端抓包（HTTP和HTTPS包）

- 抓取HTTPS包要先配置。
  - 因为HTTP是明文传输的协议，所有可以直接显示。而HTTPS的通信过程涉及到加密和证书验证。
  - 为了获取HTTPS包，你需要在客户端设置中安装Fiddler的根证书，并进行一些其他的配置，使得Fiddler可以解密HTTPS流量。
- Fiddler默认情况下只能捕获本地电脑访问的HTTP包，但是通过设置SSH隧道等技术，也可以将Fiddler用于捕获远程服务器的包。
- IE浏览器默认不需要配置即可使用。
- 访问一个网站（如百度）太多包，如何挑选出想要的那个HTTP包？使用Fiddler过滤功能。
  - 只显示URL包含的请求
  - 给访问地址设置白名单，或给这些访问地址进行标记（颜色标记）


<img src="https://raw.githubusercontent.com/LifeSum12/typora-image/main/img/202306041642298.png" alt="image-20230604164216035" style="zoom: 67%;" />

#### APP端抓包

- 配置条件
  - 手机和电脑在同一局域网
  - 手机配置代理（WIFI处设置代理，让PC端代理从而捕获到手机的请求响应）
    - 服务器IP地址（可以查看IPV4）
    - 端口（8888，表示Fiddler）
  - 抓取手机HTTPS包要先配置，在手机端。（点超级连接）

代理使用本机电脑ip，手机配置了代理后，手机访问网页的流程为：

1. 发送请求：手机将发送该请求到配置的代理服务器。通过IP+端口号，识别到本机电脑的Fiddler程序。
2. 代理服务器接收请求、处理请求、转发请求（在大多数情况下，代理服务器转发请求会用自己的IP地址和端口作为客户端发送请求）。
3. 目标网站接收请求、处理请求、生成响应。
4. 代理服务器接收响应、处理响应、转发响应（代理服务器将经过处理的响应转发回手机）。
5. 手机接收响应。

应用：访问被限制的网站、网络调试和分析。

#### 模拟低速网络

<img src="https://raw.githubusercontent.com/LifeSum12/typora-image/main/img/202306041712540.png" alt="image-20230604171252439" style="zoom: 80%;" />

Fiddler设置延迟数据。

#### 篡改数据请求

在Fiddler命令行，拦截网页请求。(拦截成功后，浏览器网页并不会迅速响应，需要等Fiddler处理完)
```cmd
bup + 请求网站地址
```

在Fddler修改数据，再提交。如修改表单数据，登陆账号密码。

对于拦截请求篡改数据，在安全测试有更专业的工具。

#### 利用AutoResponder替换源资源

重定向功能。如访问baidu.com，把访问百度logo的地址给替换了，浏览器获取到了新浪logo。

- Fiddler中AutoResponder一栏，在Rule Editor修改访问资源地址。

- 当浏览器再次去访问该源地址时，会去新的地址访问。

#### 模拟Mock/测试桩

**Mock是什么？**

假设您正在开发一个电子商务网站，并需要进行订单支付功能的测试。在这个功能中，与第三方支付接口进行交互是一个重要的组成部分。然而，在测试过程中，依赖于第三方支付接口可能会导致其他问题，可以使用Mock来模拟第三方支付接口的行为（第三方支付是无关测试功能）。

具体步骤如下：

1. 创建Mock对象：使用Mock框架或手动编写代码，创建一个模拟的第三方支付接口对象。这个Mock对象可以模拟接口的各种行为和响应。
2. 定义行为：在Mock对象中定义第三方支付接口的行为，**例如模拟支付成功或失败的响应、模拟特定的错误码等**。您可以根据测试场景和需求自定义Mock对象的行为。
3. 替换真实接口：在测试过程中，将真实的第三方支付接口替换为Mock对象。这样，测试代码将与Mock对象进行交互，而不是与实际的第三方支付接口。

**Fiddler如何使用？**

Fiddler中AutoResponder一栏，在Rule Editor修改访问资源地址。

使用自定义Json文件，替代原来响应。

- 如今HTTP响应基本都是Json字符串（包含Code和Data），前端框架通过Json数据转化为HTML响应。

请求示例（添加商品到购物车）：

```json
POST /api/cart/add
Content-Type: application/json

{
  "product_id": 12345,
  "quantity": 2
}
```

响应示例：

```text
HTTP/1.1 200 OK
Content-Type: application/json

{
  "status": "success",
  "message": "Product added to cart successfully",
  "cart_id": "abc123",
  "total_items": 5
}
```

**SpringBoot中是如何通过 json 格式数据完成前后端数据交互？**

- 后端：Controller层通过类似@RestController注解，把Java对象转化为Json，返回给前端。
- 前端：通过框架和库，或者模板引擎处理Json，渲染页面。然后将整个页面作为响应发送给浏览器。

#### 自定义请求

类似postman，发送不同请求类型，请求参数。

Fiddler中的composer栏。



### 接口测试工具（Postman）

接口测试的主要目的是验证后端接口的功能和数据交互。因此，测试人员通常关注后端返回的数据是否符合预期，通常接收的响应数据是后端返回的未渲染的 JSON 数据。验证以下内容：

- 响应状态码
- 响应头部
- 响应体数据

Postman

1. 发送HTTP请求：用于创建和发送各种类型的HTTP请求，包括GET、POST、PUT、DELETE等。并设置请求参数、头部、身份验证等。✔
2. 参数和数据管理：它提供了多种方式来设置和修改请求的参数，如路径参数、查询参数、请求体参数等。测试人员可以轻松地组织和管理请求的数据，以进行全面的接口测试。✔
3. 预期结果验证：Postman允许测试人员定义和验证请求的预期结果。它提供了丰富的断言功能，用于验证响应的状态码、头部、响应体的结构、字段值等。测试人员可以编写自定义的断言脚本，以满足特定的测试需求。✔
4. 自动化测试：Postman提供了自动化测试的能力。测试人员可以创建测试脚本，使用JavaScript编写测试逻辑，并集成到测试套件中。这样，可以实现自动化的接口测试，并进行持续集成和持续交付。
5. 环境和变量管理：Postman支持环境和变量的管理。测试人员可以定义不同的环境，并在请求中使用环境变量。这样，可以轻松地在不同的环境中执行测试，而不需要手动更改请求的配置



### 用例编写工具（Xmind）

https://mp.weixin.qq.com/s?__biz=MzAwMjE0Mzg0Nw==&mid=2650674179&idx=1&sn=683e46885dbe0a77c5b553f9da037d30&chksm=82c4570bb5b3de1d52e533d0142d0bf37b398cd0c988e98d725ddac5c24fc1161b61281532bd&token=1342498724&lang=zh_CN#rd



### 自动化测试