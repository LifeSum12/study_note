模型偏差定义： 全局模型 u 与本地模型 x 的 欧氏距离
$$
\frac{1}{m}\sum_{i = 1}^{m} \lVert u-x^i \rVert ^2
$$
意义：全局模型和所有本地模型 **参数的平均差异**



分层参数偏差定义：

​	L表示层数。T表示第L层本地epoch次数。
$$
d_l = \frac{\frac{1}{m}\sum_{i = 1}^{m} \lVert u_l-x_l^i \rVert ^2}{T_l(dim(u_l))},		l\in\{1, ... ,L\}
$$
意义：第L层，全局模型和所有本地模型 **参数的平均差异**，除以



![image-20221218151310547](https://raw.githubusercontent.com/LifeSum12/typora-image/main/img/202212181513060.png)







```5
100个客户端训练。
第R轮，
	 0. 被选中的客户端从服务器中，下载全局模型参数 W
	 1. 参与的10个客户端本地训练，然后都上传模型参数。
      # if 当用户X第L层，相较于训练前模型，瞬时差异小于某个阈值，则不需要上传第L层。
        （意味着，用户X的第L层几乎没更新） 
	 2. 服务器平均聚合模型参数 W。
	   计算参与的客户端（conv1，conv2...）各层 与 W（conv1，conv2...）各层的 欧氏差异。并在服务器中一个队列存储着，每个用户各层与全局模型W平均差异。
	   更新全局模型为 W。
	  # if 当用户X第L层，相较于平均模型，瞬时差异小于某个阈值时，服务器发送全局模型给X用户时，不需要发送第L层。
	    （意味着，新一轮发放模型第L层，与用户X的第L层相差很小，无需再发放。） 
	    
阈值=1e-5
```





